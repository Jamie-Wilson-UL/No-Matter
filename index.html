<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Matter Game</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <style>
        body { text-align: center; }
        canvas { border: 1px solid black; }
        .title { font-family: 'Press Start 2P', cursive; color: #00FF00; margin: 20px; }
        .instructions { font-family: 'Press Start 2P', cursive; color: #FFFFFF; position: absolute; left: 10px; top: 150px; text-align: left; }
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    </style>
</head>
<body onload="brython()">
    <div class="instructions">
        <p>Instructions:</p>
        <p>Move = Arrow Keys</p>
        <p>Shoot = Space</p>
    </div>
    <canvas id="game-canvas" width="800" height="600"></canvas>
    <script type="text/python">
        from browser import document, html, window
        import random

        WIDTH, HEIGHT = 800, 600
        score = 0

        canvas = document["game-canvas"]
        ctx = canvas.getContext("2d")

        player_size = 50
        player_pos = [WIDTH // 2, HEIGHT - 2 * player_size]
        player_speed = 10

        # Load spaceship image
        spaceship_img = html.IMG(src="spaceship.png")

        # Load face images
        face_images = [
            "face_0.png",
            "face_1.png",
            "face_2.png",
            "face_3.png"
        ]

        faces = [html.IMG(src=img) for img in face_images]

        enemy_size = 50
        rows = 3
        cols = 8
        enemy_padding = 10
        enemy_offset = 50
        enemies = []

        def create_enemies():
            global enemies
            enemies = []
            for row in range(rows):
                for col in range(cols):
                    x = col * (enemy_size + enemy_padding) + enemy_offset
                    y = row * (enemy_size + enemy_padding) + enemy_offset
                    enemies.append({"pos": [x, y], "img": faces[int(window.Math.random() * len(faces))]})

        create_enemies()

        enemy_speed = 2
        direction = 1
        bullets = []
        enemy_bullets = []
        bullet_speed = 5
        bullet_size = 10

        game_over = False

        def draw():
            ctx.clearRect(0, 0, WIDTH, HEIGHT)
            # Draw player
            ctx.drawImage(spaceship_img, player_pos[0], player_pos[1], player_size, player_size)
            
            # Draw enemies
            for enemy in enemies:
                ctx.drawImage(enemy["img"], enemy["pos"][0], enemy["pos"][1], enemy_size, enemy_size)

            # Draw bullets
            ctx.fillStyle = "#FFFF00"
            for bullet in bullets:
                ctx.fillRect(bullet[0], bullet[1], bullet_size, bullet_size)

            # Draw enemy bullets
            ctx.fillStyle = "#FF0000"
            for bullet in enemy_bullets:
                ctx.fillRect(bullet[0], bullet[1], bullet_size, bullet_size)

        def update():
            global direction, game_over
            if game_over:
                return

            # Move enemies
            move_down = False
            for enemy in enemies:
                enemy["pos"][0] += direction * enemy_speed
                if enemy["pos"][0] > WIDTH - enemy_size or enemy["pos"][0] < 0:
                    move_down = True

            if move_down:
                direction *= -1
                for enemy in enemies:
                    enemy["pos"][1] += enemy_size // 2

            # Enemies fire bullets occasionally
            for enemy in enemies:
                if window.Math.random() < 0.01:
                    enemy_bullets.append([enemy["pos"][0] + enemy_size // 2, enemy["pos"][1] + enemy_size])

            # Update bullets
            for bullet in bullets[:]:
                bullet[1] -= bullet_speed
                if bullet[1] < 0:
                    bullets.remove(bullet)

            # Update enemy bullets
            for bullet in enemy_bullets[:]:
                bullet[1] += bullet_speed
                if bullet[1] > HEIGHT:
                    enemy_bullets.remove(bullet)

            # Check for collisions between bullets and enemies
            for enemy in enemies[:]:
                for bullet in bullets[:]:
                    if (bullet[0] >= enemy["pos"][0] and bullet[0] < (enemy["pos"][0] + enemy_size)) or (enemy["pos"][0] >= bullet[0] and enemy["pos"][0] < (bullet[0] + bullet_size)):
                        if (bullet[1] >= enemy["pos"][1] and bullet[1] < (enemy["pos"][1] + enemy_size)) or (enemy["pos"][1] >= bullet[1] and enemy["pos"][1] < (bullet[1] + bullet_size)):
                            enemies.remove(enemy)
                            bullets.remove(bullet)
                            score += 1
                            document["score"].text = str(score)
                            break

            # Check for collisions between enemy bullets and player
            for bullet in enemy_bullets[:]:
                if (bullet[0] >= player_pos[0] and bullet[0] < (player_pos[0] + player_size)) or (player_pos[0] >= bullet[0] and player_pos[0] < (bullet[0] + bullet_size)):
                    if (bullet[1] >= player_pos[1] and bullet[1] < (player_pos[1] + player_size)) or (player_pos[1] >= bullet[1] and player_pos[1] < (bullet[1] + bullet_size)):
                        game_over = True

            draw()

        def move(event):
            if game_over:
                return
            if event.keyCode == 37 and player_pos[0] > 0:  # Left arrow
                player_pos[0] -= player_speed
            elif event.keyCode == 39 and player_pos[0] < WIDTH - player_size:  # Right arrow
                player_pos[0] += player_speed
            elif event.keyCode == 32:  # Space key
                bullets.append([player_pos[0] + player_size // 2 - bullet_size // 2, player_pos[1]])

        document.bind("keydown", move)
        window.setInterval(update, 30)

    </script>
</body>
</html>

