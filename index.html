<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Matter Game</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <style>
        body { text-align: center; margin: 0; padding: 0; background-color: black; color: white; }
        canvas { border: 1px solid white; background-color: black; display: block; margin: 20px auto; }
        .title { font-family: 'Press Start 2P', cursive; color: #00FF00; margin: 20px; }
        .instructions { font-family: 'Press Start 2P', cursive; color: #FFFFFF; position: absolute; left: 10px; top: 150px; text-align: left; }
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    </style>
</head>
<body onload="brython()">
    <div class="title">No Matter Game</div>
    <div class="instructions">
        <p>Instructions:</p>
        <p>Move = Arrow Keys</p>
        <p>Shoot = Space</p>
        <p>Score: <span id="score">0</span></p>
    </div>
    <canvas id="game-canvas" width="800" height="600"></canvas>
    <script type="text/python">
        from browser import document, html, window, timer
        import random

        # Constants
        WIDTH, HEIGHT = 800, 600
        PLAYER_SIZE = 50
        ENEMY_SIZE = 50
        BULLET_SIZE = 10
        PLAYER_SPEED = 10
        BULLET_SPEED = 5
        ENEMY_BULLET_SPEED = 2
        ENEMY_SPEED = 2

        # Game variables
        score = 0
        game_over = False

        # Player position
        player_pos = [WIDTH // 2, HEIGHT - 2 * PLAYER_SIZE]

        # Load spaceship image
        spaceship_img = html.IMG(src="spaceship.png")

        # Load enemy images
        face_images = ["face_0.png", "face_1.png", "face_2.png", "face_3.png"]
        faces = [html.IMG(src=img) for img in face_images]

        # Enemy positions
        enemies = [{"pos": [col * (ENEMY_SIZE + 10) + 50, row * (ENEMY_SIZE + 10) + 50], "img": random.choice(faces)} for row in range(3) for col in range(8)]

        # Bullets
        bullets = []
        enemy_bullets = []

        canvas = document["game-canvas"]
        ctx = canvas.getContext("2d")

        def draw():
            ctx.clearRect(0, 0, WIDTH, HEIGHT)
            # Draw player
            if not game_over:
                ctx.drawImage(spaceship_img, player_pos[0], player_pos[1], PLAYER_SIZE, PLAYER_SIZE)
            # Draw enemies
            for enemy in enemies:
                ctx.drawImage(enemy["img"], enemy["pos"][0], enemy["pos"][1], ENEMY_SIZE, ENEMY_SIZE)
            # Draw bullets
            ctx.fillStyle = "yellow"
            for bullet in bullets:
                ctx.fillRect(bullet[0], bullet[1], BULLET_SIZE, BULLET_SIZE)
            # Draw enemy bullets
            ctx.fillStyle = "red"
            for bullet in enemy_bullets:
                ctx.fillRect(bullet[0], bullet[1], BULLET_SIZE, BULLET_SIZE)

        def update():
            global game_over, score

            if game_over:
                return

            # Move bullets
            for bullet in bullets[:]:
                bullet[1] -= BULLET_SPEED
                if bullet[1] < 0:
                    bullets.remove(bullet)

            # Move enemy bullets
            for bullet in enemy_bullets[:]:
                bullet[1] += ENEMY_BULLET_SPEED
                if bullet[1] > HEIGHT:
                    enemy_bullets.remove(bullet)

            # Check for bullet collisions with enemies
            for enemy in enemies[:]:
                for bullet in bullets[:]:
                    if bullet[0] >= enemy["pos"][0] and bullet[0] <= enemy["pos"][0] + ENEMY_SIZE and bullet[1] >= enemy["pos"][1] and bullet[1] <= enemy["pos"][1] + ENEMY_SIZE:
                        enemies.remove(enemy)
                        bullets.remove(bullet)
                        score += 1
                        document["score"].text = str(score)
                        break

            # Check for enemy bullet collisions with player
            for bullet in enemy_bullets[:]:
                if bullet[0] >= player_pos[0] and bullet[0] <= player_pos[0] + PLAYER_SIZE and bullet[1] >= player_pos[1] and bullet[1] <= player_pos[1] + PLAYER_SIZE:
                    game_over = True

            # Move enemies
            move_down = False
            for enemy in enemies:
                enemy["pos"][0] += ENEMY_SPEED
                if enemy["pos"][0] > WIDTH - ENEMY_SIZE or enemy["pos"][0] < 0:
                    move_down = True
            if move_down:
                for enemy in enemies:
                    enemy["pos"][1] += ENEMY_SIZE
                ENEMY_SPEED = -ENEMY_SPEED

            # Enemies fire bullets occasionally
            for enemy in enemies:
                if random.random() < 0.01:
                    enemy_bullets.append([enemy["pos"][0] + ENEMY_SIZE // 2, enemy["pos"][1] + ENEMY_SIZE])

            draw()

        def move_player(event):
            if game_over:
                return
            if event.keyCode == 37 and player_pos[0] > 0:  # Left arrow
                player_pos[0] -= PLAYER_SPEED
            elif event.keyCode == 39 and player_pos[0] < WIDTH - PLAYER_SIZE:  # Right arrow
                player_pos[0] += PLAYER_SPEED
            elif event.keyCode == 32:  # Space key
                bullets.append([player_pos[0] + PLAYER_SIZE // 2 - BULLET_SIZE // 2, player_pos[1]])

        document.bind("keydown", move_player)
        timer.set_interval(update, 30)
    </script>
</body>
</html>
